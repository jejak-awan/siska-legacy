import{q as P,p as y,c,o as d,f as e,v as V,g as $,x as h,y as F,z as L,l as I,s as b,F as z,k as U,j as w,t as p,D as q,w as j,A as H,B as Q,a as E,e as R,b as S,C as K}from"./index-Bo0LgBjO.js";import{_ as B}from"./Button-CJxYOY-e.js";import{_ as J}from"./ImageUpload-wo5FzqEw.js";const W={class:"fixed inset-0 z-50 overflow-y-auto"},X={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Y={class:"inline-block align-bottom bg-background rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full"},ee={class:"bg-background px-6 py-4 border-b border-border"},te={class:"flex items-center justify-between"},oe={class:"bg-background px-6 py-4"},se={class:"space-y-6"},re={key:0,class:"mt-2 flex flex-wrap gap-2"},ne=["onClick"],ie={class:"flex items-center"},le={class:"bg-background px-6 py-4 border-t border-border flex justify-end space-x-3"},ae={key:0,class:"animate-spin h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24"},de={__name:"GalleryUploadModal",emits:["close","uploaded"],setup(u,{emit:C}){const x=C,v=H(),l=P({image:null,title:"",description:"",category:"",tags:[],is_featured:!1}),i=y(""),f=y(!1),k=()=>{i.value.trim()?l.tags=i.value.split(",").map(r=>r.trim()).filter(r=>r.length>0):l.tags=[]},M=r=>{l.tags=l.tags.filter(t=>t!==r),i.value=l.tags.join(", ")},m=async()=>{try{if(f.value=!0,!l.image){v.error("Foto wajib diupload");return}if(!l.title.trim()){v.error("Judul wajib diisi");return}if(!l.category){v.error("Kategori wajib dipilih");return}const r={id:Date.now(),title:l.title,description:l.description,category:l.category,tags:l.tags,is_featured:l.is_featured,url:l.image,file_size:1024e3,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};await new Promise(t=>setTimeout(t,2e3)),x("uploaded",r)}catch(r){v.error("Gagal mengupload foto"),console.error("Upload error:",r)}finally{f.value=!1}};return(r,t)=>(d(),c("div",W,[e("div",X,[e("div",{class:"fixed inset-0 bg-background/80 backdrop-blur-sm transition-opacity",onClick:t[0]||(t[0]=o=>r.$emit("close"))}),e("div",Y,[e("form",{onSubmit:V(m,["prevent"])},[e("div",ee,[e("div",te,[t[10]||(t[10]=e("h3",{class:"text-lg font-medium text-foreground"}," Upload Foto ",-1)),e("button",{type:"button",onClick:t[1]||(t[1]=o=>r.$emit("close")),class:"text-muted-foreground hover:text-foreground"},[...t[9]||(t[9]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",oe,[e("div",se,[e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-foreground mb-2"}," Foto * ",-1)),$(J,{modelValue:l.image,"onUpdate:modelValue":t[2]||(t[2]=o=>l.image=o),"max-size":10,"max-width":2048,"max-height":2048,accept:"image/*",multiple:""},null,8,["modelValue"]),t[12]||(t[12]=e("p",{class:"mt-1 text-xs text-muted-foreground"}," Format: JPG, PNG, GIF. Maksimal 10MB per foto. ",-1))]),e("div",null,[t[13]||(t[13]=e("label",{for:"title",class:"block text-sm font-medium text-foreground mb-2"}," Judul * ",-1)),h(e("input",{id:"title","onUpdate:modelValue":t[3]||(t[3]=o=>l.title=o),type:"text",required:"",class:"w-full px-3 py-2 border border-input rounded-md bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:border-ring",placeholder:"Masukkan judul foto"},null,512),[[F,l.title]])]),e("div",null,[t[14]||(t[14]=e("label",{for:"description",class:"block text-sm font-medium text-foreground mb-2"}," Deskripsi ",-1)),h(e("textarea",{id:"description","onUpdate:modelValue":t[4]||(t[4]=o=>l.description=o),rows:"3",class:"w-full px-3 py-2 border border-input rounded-md bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:border-ring",placeholder:"Masukkan deskripsi foto"},null,512),[[F,l.description]])]),e("div",null,[t[16]||(t[16]=e("label",{for:"category",class:"block text-sm font-medium text-foreground mb-2"}," Kategori * ",-1)),h(e("select",{id:"category","onUpdate:modelValue":t[5]||(t[5]=o=>l.category=o),required:"",class:"w-full px-3 py-2 border border-input rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:border-ring"},[...t[15]||(t[15]=[I('<option value="">Pilih kategori</option><option value="kegiatan">Kegiatan</option><option value="acara">Acara</option><option value="prestasi">Prestasi</option><option value="sekolah">Sekolah</option>',5)])],512),[[L,l.category]])]),e("div",null,[t[18]||(t[18]=e("label",{for:"tags",class:"block text-sm font-medium text-foreground mb-2"}," Tags ",-1)),h(e("input",{id:"tags","onUpdate:modelValue":t[6]||(t[6]=o=>i.value=o),type:"text",class:"w-full px-3 py-2 border border-input rounded-md bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:border-ring",placeholder:"Masukkan tags (pisahkan dengan koma)",onBlur:k},null,544),[[F,i.value]]),l.tags.length>0?(d(),c("div",re,[(d(!0),c(z,null,U(l.tags,o=>(d(),c("span",{key:o,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-primary/10 text-primary"},[w(p(o)+" ",1),e("button",{type:"button",onClick:g=>M(o),class:"ml-1 text-primary hover:text-primary/80"},[...t[17]||(t[17]=[e("svg",{class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,ne)]))),128))])):b("",!0)]),e("div",ie,[h(e("input",{id:"featured","onUpdate:modelValue":t[7]||(t[7]=o=>l.is_featured=o),type:"checkbox",class:"h-4 w-4 text-primary focus:ring-ring border-input rounded"},null,512),[[q,l.is_featured]]),t[19]||(t[19]=e("label",{for:"featured",class:"ml-2 block text-sm text-foreground"}," Jadikan foto unggulan ",-1))])])]),e("div",le,[$(B,{type:"button",variant:"outline",onClick:t[8]||(t[8]=o=>r.$emit("close"))},{default:j(()=>[...t[20]||(t[20]=[w(" Batal ",-1)])]),_:1}),$(B,{type:"submit",disabled:f.value||!l.image,class:"bg-primary text-primary-foreground hover:bg-primary/90"},{default:j(()=>[f.value?(d(),c("svg",ae,[...t[21]||(t[21]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):b("",!0),w(" "+p(f.value?"Mengupload...":"Upload"),1)]),_:1},8,["disabled"])])],32)])])]))}},ue={class:"fixed inset-0 z-50 overflow-y-auto"},ce={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},me={class:"inline-block align-bottom bg-background rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full"},ge={class:"bg-background px-6 py-4 border-b border-border"},pe={class:"flex items-center justify-between"},fe={class:"bg-background px-6 py-4"},ve={class:"space-y-6"},xe={class:"w-full h-48 bg-muted rounded-lg overflow-hidden"},be=["src","alt"],ke={key:0,class:"mt-2 flex flex-wrap gap-2"},ye=["onClick"],he={class:"flex items-center"},we={class:"bg-background px-6 py-4 border-t border-border flex justify-end space-x-3"},$e={key:0,class:"animate-spin h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24"},Ce={__name:"GalleryEditModal",props:{image:{type:Object,required:!0}},emits:["close","updated"],setup(u,{emit:C}){const x=u,v=C,l=H(),i=P({newImage:null,title:"",description:"",category:"",tags:[],is_featured:!1}),f=y(""),k=y(!1);Q(()=>x.image,t=>{t&&(i.title=t.title||"",i.description=t.description||"",i.category=t.category||"",i.tags=t.tags||[],i.is_featured=t.is_featured||!1,f.value=i.tags.join(", "))},{immediate:!0});const M=()=>{f.value.trim()?i.tags=f.value.split(",").map(t=>t.trim()).filter(t=>t.length>0):i.tags=[]},m=t=>{i.tags=i.tags.filter(o=>o!==t),f.value=i.tags.join(", ")},r=async()=>{try{if(k.value=!0,!i.title.trim()){l.error("Judul wajib diisi");return}if(!i.category){l.error("Kategori wajib dipilih");return}const t={...x.image,title:i.title,description:i.description,category:i.category,tags:i.tags,is_featured:i.is_featured,url:i.newImage||x.image.url,updated_at:new Date().toISOString()};await new Promise(o=>setTimeout(o,1e3)),v("updated",t)}catch(t){l.error("Gagal memperbarui foto"),console.error("Update error:",t)}finally{k.value=!1}};return(t,o)=>(d(),c("div",ue,[e("div",ce,[e("div",{class:"fixed inset-0 bg-background/80 backdrop-blur-sm transition-opacity",onClick:o[0]||(o[0]=g=>t.$emit("close"))}),e("div",me,[e("form",{onSubmit:V(r,["prevent"])},[e("div",ge,[e("div",pe,[o[10]||(o[10]=e("h3",{class:"text-lg font-medium text-foreground"}," Edit Foto ",-1)),e("button",{type:"button",onClick:o[1]||(o[1]=g=>t.$emit("close")),class:"text-muted-foreground hover:text-foreground"},[...o[9]||(o[9]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",fe,[e("div",ve,[e("div",null,[o[11]||(o[11]=e("label",{class:"block text-sm font-medium text-foreground mb-2"}," Foto Saat Ini ",-1)),e("div",xe,[e("img",{src:u.image.url,alt:u.image.title,class:"w-full h-full object-cover"},null,8,be)])]),e("div",null,[o[12]||(o[12]=e("label",{class:"block text-sm font-medium text-foreground mb-2"}," Ganti Foto (Opsional) ",-1)),$(J,{modelValue:i.newImage,"onUpdate:modelValue":o[2]||(o[2]=g=>i.newImage=g),"max-size":10,"max-width":2048,"max-height":2048,accept:"image/*"},null,8,["modelValue"]),o[13]||(o[13]=e("p",{class:"mt-1 text-xs text-muted-foreground"}," Kosongkan jika tidak ingin mengganti foto. ",-1))]),e("div",null,[o[14]||(o[14]=e("label",{for:"title",class:"block text-sm font-medium text-foreground mb-2"}," Judul * ",-1)),h(e("input",{id:"title","onUpdate:modelValue":o[3]||(o[3]=g=>i.title=g),type:"text",required:"",class:"w-full px-3 py-2 border border-input rounded-md bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:border-ring",placeholder:"Masukkan judul foto"},null,512),[[F,i.title]])]),e("div",null,[o[15]||(o[15]=e("label",{for:"description",class:"block text-sm font-medium text-foreground mb-2"}," Deskripsi ",-1)),h(e("textarea",{id:"description","onUpdate:modelValue":o[4]||(o[4]=g=>i.description=g),rows:"3",class:"w-full px-3 py-2 border border-input rounded-md bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:border-ring",placeholder:"Masukkan deskripsi foto"},null,512),[[F,i.description]])]),e("div",null,[o[17]||(o[17]=e("label",{for:"category",class:"block text-sm font-medium text-foreground mb-2"}," Kategori * ",-1)),h(e("select",{id:"category","onUpdate:modelValue":o[5]||(o[5]=g=>i.category=g),required:"",class:"w-full px-3 py-2 border border-input rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:border-ring"},[...o[16]||(o[16]=[I('<option value="">Pilih kategori</option><option value="kegiatan">Kegiatan</option><option value="acara">Acara</option><option value="prestasi">Prestasi</option><option value="sekolah">Sekolah</option>',5)])],512),[[L,i.category]])]),e("div",null,[o[19]||(o[19]=e("label",{for:"tags",class:"block text-sm font-medium text-foreground mb-2"}," Tags ",-1)),h(e("input",{id:"tags","onUpdate:modelValue":o[6]||(o[6]=g=>f.value=g),type:"text",class:"w-full px-3 py-2 border border-input rounded-md bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:border-ring",placeholder:"Masukkan tags (pisahkan dengan koma)",onBlur:M},null,544),[[F,f.value]]),i.tags.length>0?(d(),c("div",ke,[(d(!0),c(z,null,U(i.tags,g=>(d(),c("span",{key:g,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-primary/10 text-primary"},[w(p(g)+" ",1),e("button",{type:"button",onClick:A=>m(g),class:"ml-1 text-primary hover:text-primary/80"},[...o[18]||(o[18]=[e("svg",{class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,ye)]))),128))])):b("",!0)]),e("div",he,[h(e("input",{id:"featured","onUpdate:modelValue":o[7]||(o[7]=g=>i.is_featured=g),type:"checkbox",class:"h-4 w-4 text-primary focus:ring-ring border-input rounded"},null,512),[[q,i.is_featured]]),o[20]||(o[20]=e("label",{for:"featured",class:"ml-2 block text-sm text-foreground"}," Jadikan foto unggulan ",-1))])])]),e("div",we,[$(B,{type:"button",variant:"outline",onClick:o[8]||(o[8]=g=>t.$emit("close"))},{default:j(()=>[...o[21]||(o[21]=[w(" Batal ",-1)])]),_:1}),$(B,{type:"submit",disabled:k.value,class:"bg-primary text-primary-foreground hover:bg-primary/90"},{default:j(()=>[k.value?(d(),c("svg",$e,[...o[22]||(o[22]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):b("",!0),w(" "+p(k.value?"Menyimpan...":"Simpan"),1)]),_:1},8,["disabled"])])],32)])])]))}},Me={class:"fixed inset-0 z-50 overflow-y-auto"},je={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Be={class:"inline-block align-bottom bg-background rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full"},_e={class:"bg-background px-6 py-4 border-b border-border"},Fe={class:"flex items-center justify-between"},Ve={class:"flex items-center space-x-3"},ze={class:"text-xs text-muted-foreground bg-muted px-2 py-1 rounded"},Ue={key:0,class:"flex items-center space-x-1 text-primary"},Se={class:"bg-background"},Le={class:"relative"},De=["src","alt"],Te={class:"absolute bottom-4 right-4 bg-black/50 text-white px-3 py-1 rounded-full text-sm"},Ie={class:"px-6 py-6"},He={class:"text-2xl font-bold text-foreground mb-4"},Ae={class:"flex items-center justify-between mb-6 text-sm text-muted-foreground"},Ge={class:"flex items-center space-x-4"},Ke={key:0},Pe={key:1},qe={key:0,class:"mb-6 p-4 bg-muted/50 rounded-lg"},Ee={class:"text-muted-foreground"},Je={key:1,class:"mb-6"},Ne={class:"flex flex-wrap gap-2"},Ze={class:"bg-background px-6 py-4 border-t border-border flex justify-between"},Oe={class:"flex space-x-2"},Qe={__name:"GalleryViewModal",props:{image:{type:Object,required:!0},images:{type:Array,default:()=>[]}},emits:["close","edit","delete"],setup(u,{emit:C}){const x=u,v=E(()=>x.images.findIndex(m=>m.id===x.image.id)),l=m=>{switch(m){case"kegiatan":return"Kegiatan";case"acara":return"Acara";case"prestasi":return"Prestasi";case"sekolah":return"Sekolah";default:return m}},i=m=>new Date(m).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),f=m=>{if(m===0)return"0 Bytes";const r=1024,t=["Bytes","KB","MB","GB"],o=Math.floor(Math.log(m)/Math.log(r));return parseFloat((m/Math.pow(r,o)).toFixed(2))+" "+t[o]},k=()=>{v.value>0&&x.images[v.value-1]},M=()=>{v.value<x.images.length-1&&x.images[v.value+1]};return(m,r)=>(d(),c("div",Me,[e("div",je,[e("div",{class:"fixed inset-0 bg-background/80 backdrop-blur-sm transition-opacity",onClick:r[0]||(r[0]=t=>m.$emit("close"))}),e("div",Be,[e("div",_e,[e("div",Fe,[e("div",Ve,[e("span",ze,p(l(u.image.category)),1),u.image.is_featured?(d(),c("div",Ue,[...r[5]||(r[5]=[e("svg",{class:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})],-1),e("span",{class:"text-xs font-medium"},"Unggulan",-1)])])):b("",!0)]),e("button",{type:"button",onClick:r[1]||(r[1]=t=>m.$emit("close")),class:"text-muted-foreground hover:text-foreground"},[...r[6]||(r[6]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",Se,[e("div",Le,[e("img",{src:u.image.url,alt:u.image.title,class:"w-full h-96 object-cover"},null,8,De),v.value>0?(d(),c("button",{key:0,onClick:k,class:"absolute left-4 top-1/2 transform -translate-y-1/2 p-2 bg-black/50 text-white rounded-full hover:bg-black/70 transition-colors"},[...r[7]||(r[7]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])])):b("",!0),v.value<u.images.length-1?(d(),c("button",{key:1,onClick:M,class:"absolute right-4 top-1/2 transform -translate-y-1/2 p-2 bg-black/50 text-white rounded-full hover:bg-black/70 transition-colors"},[...r[8]||(r[8]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])])):b("",!0),e("div",Te,p(v.value+1)+" / "+p(u.images.length),1)]),e("div",Ie,[e("h1",He,p(u.image.title),1),e("div",Ae,[e("div",Ge,[e("span",null,p(i(u.image.created_at)),1),r[9]||(r[9]=e("span",null,"•",-1)),e("span",null,p(f(u.image.file_size)),1),u.image.updated_at!==u.image.created_at?(d(),c("span",Ke,"•")):b("",!0),u.image.updated_at!==u.image.created_at?(d(),c("span",Pe," Diperbarui "+p(i(u.image.updated_at)),1)):b("",!0)])]),u.image.description?(d(),c("div",qe,[e("p",Ee,p(u.image.description),1)])):b("",!0),u.image.tags&&u.image.tags.length>0?(d(),c("div",Je,[e("div",Ne,[(d(!0),c(z,null,U(u.image.tags,t=>(d(),c("span",{key:t,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-primary/10 text-primary"}," #"+p(t),1))),128))])])):b("",!0)])]),e("div",Ze,[e("div",Oe,[$(B,{variant:"outline",size:"sm",onClick:r[2]||(r[2]=t=>m.$emit("edit",u.image))},{default:j(()=>[...r[10]||(r[10]=[e("svg",{class:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),w(" Edit ",-1)])]),_:1}),$(B,{variant:"outline",size:"sm",onClick:r[3]||(r[3]=t=>m.$emit("delete",u.image)),class:"text-destructive hover:text-destructive"},{default:j(()=>[...r[11]||(r[11]=[e("svg",{class:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),w(" Hapus ",-1)])]),_:1})]),$(B,{variant:"outline",onClick:r[4]||(r[4]=t=>m.$emit("close"))},{default:j(()=>[...r[12]||(r[12]=[w(" Tutup ",-1)])]),_:1})])])])]))}},Re={class:"py-6"},We={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Xe={class:"mb-8"},Ye={class:"flex items-center justify-between"},et={class:"flex items-center space-x-4"},tt={class:"mb-8"},ot={class:"flex flex-col sm:flex-row gap-4"},st={class:"flex-1"},rt={class:"relative"},nt={class:"flex gap-2"},it={class:"mb-6 flex justify-between items-center"},lt={class:"flex items-center space-x-2"},at={class:"text-sm text-muted-foreground"},dt={key:0,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4"},ut=["onClick"],ct=["src","alt"],mt={class:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors"},gt={class:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"},pt={class:"text-white text-center"},ft={class:"text-sm font-medium"},vt={class:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity"},xt={class:"flex space-x-1"},bt=["onClick"],kt=["onClick"],yt={key:1,class:"space-y-4"},ht=["onClick"],wt={class:"flex-shrink-0 w-20 h-20 bg-muted rounded-lg overflow-hidden"},$t=["src","alt"],Ct={class:"flex-1 min-w-0"},Mt={class:"text-sm font-medium text-foreground truncate"},jt={class:"text-sm text-muted-foreground truncate"},Bt={class:"flex items-center space-x-4 mt-1"},_t={class:"text-xs text-muted-foreground bg-muted px-2 py-1 rounded"},Ft={class:"text-xs text-muted-foreground"},Vt={class:"text-xs text-muted-foreground"},zt={class:"flex items-center space-x-2"},Ut=["onClick"],St=["onClick"],Lt={key:2,class:"text-center py-12"},Dt={class:"mt-1 text-sm text-muted-foreground"},Tt={class:"mt-6"},Gt={__name:"GalleryView",setup(u){const C=H(),x=y(""),v=y(""),l=y("newest"),i=y("grid"),f=y(!1),k=y(!1),M=y(!1),m=y(null),r=y(null),t=y([{id:1,title:"Upacara Bendera",description:"Upacara bendera setiap hari Senin",url:"https://via.placeholder.com/400x300/3B82F6/FFFFFF?text=Upacara+Bendera",category:"kegiatan",file_size:1024e3,created_at:"2024-01-15T10:00:00Z",updated_at:"2024-01-15T10:00:00Z"},{id:2,title:"Lomba Cerdas Cermat",description:"Lomba cerdas cermat antar kelas",url:"https://via.placeholder.com/400x300/10B981/FFFFFF?text=Lomba+Cerdas+Cermat",category:"acara",file_size:2048e3,created_at:"2024-01-14T14:30:00Z",updated_at:"2024-01-14T14:30:00Z"},{id:3,title:"Prestasi Siswa",description:"Penghargaan prestasi siswa berprestasi",url:"https://via.placeholder.com/400x300/F59E0B/FFFFFF?text=Prestasi+Siswa",category:"prestasi",file_size:1536e3,created_at:"2024-01-13T09:15:00Z",updated_at:"2024-01-13T09:15:00Z"}]),o=E(()=>{let a=t.value;if(x.value){const s=x.value.toLowerCase();a=a.filter(n=>n.title.toLowerCase().includes(s)||n.description.toLowerCase().includes(s))}switch(v.value&&(a=a.filter(s=>s.category===v.value)),l.value){case"newest":a=a.sort((s,n)=>new Date(n.created_at)-new Date(s.created_at));break;case"oldest":a=a.sort((s,n)=>new Date(s.created_at)-new Date(n.created_at));break;case"name":a=a.sort((s,n)=>s.title.localeCompare(n.title));break}return a}),g=a=>{switch(a){case"kegiatan":return"Kegiatan";case"acara":return"Acara";case"prestasi":return"Prestasi";case"sekolah":return"Sekolah";default:return a}},A=a=>new Date(a).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"}),N=a=>{if(a===0)return"0 Bytes";const s=1024,n=["Bytes","KB","MB","GB"],_=Math.floor(Math.log(a)/Math.log(s));return parseFloat((a/Math.pow(s,_)).toFixed(2))+" "+n[_]},G=a=>{r.value=a,M.value=!0},D=a=>{m.value=a,k.value=!0},T=async a=>{if(confirm(`Apakah Anda yakin ingin menghapus "${a.title}"?`))try{const s=t.value.findIndex(n=>n.id===a.id);s>-1&&(t.value.splice(s,1),C.success("Foto berhasil dihapus"))}catch{C.error("Gagal menghapus foto")}},Z=a=>{t.value.unshift(a),f.value=!1,C.success("Foto berhasil diupload")},O=a=>{const s=t.value.findIndex(n=>n.id===a.id);s>-1&&(t.value[s]=a),k.value=!1,C.success("Foto berhasil diperbarui")};return R(()=>{}),(a,s)=>(d(),c("div",Re,[e("div",We,[e("div",Xe,[e("div",Ye,[s[11]||(s[11]=e("div",null,[e("h1",{class:"text-3xl font-bold text-foreground"},"Gallery"),e("p",{class:"mt-2 text-lg text-muted-foreground"}," Kelola dan tampilkan foto-foto kegiatan sekolah ")],-1)),e("div",et,[$(B,{onClick:s[0]||(s[0]=n=>f.value=!0),class:"bg-primary text-primary-foreground hover:bg-primary/90"},{default:j(()=>[...s[10]||(s[10]=[e("svg",{class:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),w(" Upload Foto ",-1)])]),_:1})])])]),e("div",tt,[e("div",ot,[e("div",st,[e("div",rt,[s[12]||(s[12]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-muted-foreground",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),h(e("input",{"onUpdate:modelValue":s[1]||(s[1]=n=>x.value=n),type:"text",placeholder:"Cari foto...",class:"block w-full pl-10 pr-3 py-2 border border-input rounded-md bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:border-ring"},null,512),[[F,x.value]])])]),e("div",nt,[h(e("select",{"onUpdate:modelValue":s[2]||(s[2]=n=>v.value=n),class:"px-3 py-2 border border-input rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:border-ring"},[...s[13]||(s[13]=[I('<option value="">Semua Kategori</option><option value="kegiatan">Kegiatan</option><option value="acara">Acara</option><option value="prestasi">Prestasi</option><option value="sekolah">Sekolah</option>',5)])],512),[[L,v.value]]),h(e("select",{"onUpdate:modelValue":s[3]||(s[3]=n=>l.value=n),class:"px-3 py-2 border border-input rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:border-ring"},[...s[14]||(s[14]=[e("option",{value:"newest"},"Terbaru",-1),e("option",{value:"oldest"},"Terlama",-1),e("option",{value:"name"},"Nama A-Z",-1)])],512),[[L,l.value]])])])]),e("div",it,[e("div",lt,[e("button",{onClick:s[4]||(s[4]=n=>i.value="grid"),class:K(["p-2 rounded-md transition-colors",i.value==="grid"?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-accent"])},[...s[15]||(s[15]=[e("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)])],2),e("button",{onClick:s[5]||(s[5]=n=>i.value="list"),class:K(["p-2 rounded-md transition-colors",i.value==="list"?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-accent"])},[...s[16]||(s[16]=[e("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})],-1)])],2)]),e("div",at,p(o.value.length)+" foto ",1)]),i.value==="grid"?(d(),c("div",dt,[(d(!0),c(z,null,U(o.value,n=>(d(),c("div",{key:n.id,class:"group relative aspect-square bg-muted rounded-lg overflow-hidden cursor-pointer",onClick:_=>G(n)},[e("img",{src:n.url,alt:n.title,class:"w-full h-full object-cover transition-transform group-hover:scale-105"},null,8,ct),e("div",mt,[e("div",gt,[e("div",pt,[s[17]||(s[17]=e("svg",{class:"h-8 w-8 mx-auto mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),e("p",ft,p(n.title),1)])])]),e("div",vt,[e("div",xt,[e("button",{onClick:V(_=>D(n),["stop"]),class:"p-1 bg-white/90 rounded-full hover:bg-white transition-colors"},[...s[18]||(s[18]=[e("svg",{class:"h-4 w-4 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,bt),e("button",{onClick:V(_=>T(n),["stop"]),class:"p-1 bg-white/90 rounded-full hover:bg-white transition-colors"},[...s[19]||(s[19]=[e("svg",{class:"h-4 w-4 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,kt)])])],8,ut))),128))])):(d(),c("div",yt,[(d(!0),c(z,null,U(o.value,n=>(d(),c("div",{key:n.id,class:"flex items-center space-x-4 p-4 bg-card rounded-lg border border-border hover:shadow-md transition-shadow cursor-pointer",onClick:_=>G(n)},[e("div",wt,[e("img",{src:n.url,alt:n.title,class:"w-full h-full object-cover"},null,8,$t)]),e("div",Ct,[e("h3",Mt,p(n.title),1),e("p",jt,p(n.description),1),e("div",Bt,[e("span",_t,p(g(n.category)),1),e("span",Ft,p(A(n.created_at)),1),e("span",Vt,p(N(n.file_size)),1)])]),e("div",zt,[e("button",{onClick:V(_=>D(n),["stop"]),class:"p-2 text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"},[...s[20]||(s[20]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,Ut),e("button",{onClick:V(_=>T(n),["stop"]),class:"p-2 text-destructive hover:text-destructive hover:bg-destructive/10 rounded-md transition-colors"},[...s[21]||(s[21]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,St)])],8,ht))),128))])),o.value.length===0?(d(),c("div",Lt,[s[23]||(s[23]=e("svg",{class:"mx-auto h-12 w-12 text-muted-foreground",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),s[24]||(s[24]=e("h3",{class:"mt-2 text-sm font-medium text-foreground"},"Tidak ada foto",-1)),e("p",Dt,p(x.value?"Tidak ada foto yang sesuai dengan pencarian.":"Mulai dengan mengupload foto pertama Anda."),1),e("div",Tt,[x.value?b("",!0):(d(),S(B,{key:0,onClick:s[6]||(s[6]=n=>f.value=!0)},{default:j(()=>[...s[22]||(s[22]=[e("svg",{class:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),w(" Upload Foto ",-1)])]),_:1}))])])):b("",!0)]),f.value?(d(),S(de,{key:0,onClose:s[7]||(s[7]=n=>f.value=!1),onUploaded:Z})):b("",!0),k.value?(d(),S(Ce,{key:1,image:m.value,onClose:s[8]||(s[8]=n=>k.value=!1),onUpdated:O},null,8,["image"])):b("",!0),M.value?(d(),S(Qe,{key:2,image:r.value,images:o.value,onClose:s[9]||(s[9]=n=>M.value=!1),onEdit:D,onDelete:T},null,8,["image","images"])):b("",!0)]))}};export{Gt as default};
