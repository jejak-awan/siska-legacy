import{_ as J,p as u,q as N,e as P,c as l,o as r,f as e,s as b,F as h,k as _,l as D,t as n,v as H,x,D as $,z as Z,y as S,C as y}from"./index-Bo0LgBjO.js";const G={class:"backup-restore-view"},K={class:"mb-6"},O={class:"flex space-x-8","aria-label":"Tabs"},Q=["onClick"],W={key:0,class:"space-y-6"},X={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Y={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ee={class:"border border-gray-200 rounded-lg p-4"},te=["disabled"],se={key:0},ae={key:1},oe={class:"border border-gray-200 rounded-lg p-4"},le=["disabled"],re={key:0},ne={key:1},ie={class:"bg-white rounded-lg shadow-sm border border-gray-200"},de={class:"overflow-x-auto"},ue={class:"min-w-full divide-y divide-gray-200"},ce={class:"bg-white divide-y divide-gray-200"},pe={class:"px-6 py-4 whitespace-nowrap"},ge={class:"text-sm font-medium text-gray-900"},me={class:"text-sm text-gray-500"},fe={class:"px-6 py-4 whitespace-nowrap"},be={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},xe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ye={class:"px-6 py-4 whitespace-nowrap"},ve={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},ke=["onClick"],he=["onClick"],_e={key:1,class:"space-y-6"},we={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Be={class:"border-2 border-dashed border-gray-300 rounded-lg p-6"},Ce={class:"text-center"},Me={class:"mt-4"},Fe={for:"file-upload",class:"cursor-pointer"},De={key:0,class:"mt-4 p-4 bg-gray-50 rounded-lg"},Se={class:"flex items-center justify-between"},je={class:"text-sm font-medium text-gray-900"},Re={class:"text-sm text-gray-500"},Te={class:"mt-6"},ze=["disabled"],Ae={key:0},Ve={key:1},Ee={class:"bg-white rounded-lg shadow-sm border border-gray-200"},Le={class:"overflow-x-auto"},qe={class:"min-w-full divide-y divide-gray-200"},Ue={class:"bg-white divide-y divide-gray-200"},Ie={class:"px-6 py-4 whitespace-nowrap"},Je={class:"text-sm font-medium text-gray-900"},Ne={class:"text-sm text-gray-500"},Pe={class:"px-6 py-4 whitespace-nowrap"},He={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},$e={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Ze=["onClick","disabled"],Ge={key:0},Ke={key:1},Oe={key:2,class:"space-y-6"},Qe={class:"bg-white rounded-lg shadow-sm border border-gray-200"},We={class:"p-6"},Xe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ye={class:"space-y-2"},et={class:"flex items-center"},tt={class:"pt-4"},st=["disabled"],at={key:0},ot={key:1},lt={__name:"BackupRestoreView",setup(rt){const o=u(!1),m=u("backup"),c=u(""),p=u(""),d=u(null),v=u(null),j=[{id:"backup",name:"Backup"},{id:"restore",name:"Restore"},{id:"settings",name:"Pengaturan"}],f=u([]),i=N({auto_backup_enabled:!1,backup_frequency:"weekly",backup_retention:30,backup_location:"/var/backups/kesiswaan"}),k=async()=>{try{o.value=!0,f.value=[{id:1,nama_file:"backup_full_20241201_143022.zip",deskripsi:"Full backup sistem",jenis:"full",ukuran:52428800,tanggal:"2024-12-01T14:30:22Z",status:"completed"},{id:2,nama_file:"backup_db_20241130_090000.sql",deskripsi:"Database backup",jenis:"database",ukuran:10485760,tanggal:"2024-11-30T09:00:00Z",status:"completed"},{id:3,nama_file:"backup_full_20241129_180000.zip",deskripsi:"Full backup sistem",jenis:"full",ukuran:52428800,tanggal:"2024-11-29T18:00:00Z",status:"completed"}]}catch(s){console.error("Error loading backup data:",s)}finally{o.value=!1}},R=async()=>{try{o.value=!0,c.value="full",console.log("Creating full backup..."),await k()}catch(s){console.error("Error creating full backup:",s)}finally{o.value=!1,c.value=""}},T=async()=>{try{o.value=!0,c.value="database",console.log("Creating database backup..."),await k()}catch(s){console.error("Error creating database backup:",s)}finally{o.value=!1,c.value=""}},z=s=>{console.log("Downloading backup:",s)},A=async s=>{if(confirm("Apakah Anda yakin ingin menghapus backup ini?"))try{f.value=f.value.filter(t=>t.id!==s)}catch(t){console.error("Error deleting backup:",t)}},V=s=>{const t=s.target.files[0];t&&(d.value=t)},w=()=>{d.value=null,v.value&&(v.value.value="")},E=async()=>{if(d.value&&confirm("Apakah Anda yakin ingin melakukan restore? Ini akan mengganti semua data yang ada."))try{o.value=!0,p.value="file",new FormData().append("file",d.value),console.log("Restoring from file..."),w()}catch(s){console.error("Error restoring from file:",s)}finally{o.value=!1,p.value=""}},L=async s=>{if(confirm("Apakah Anda yakin ingin melakukan restore? Ini akan mengganti semua data yang ada."))try{o.value=!0,p.value="backup",console.log("Restoring from backup:",s)}catch(t){console.error("Error restoring from backup:",t)}finally{o.value=!1,p.value=""}},q=async()=>{try{o.value=!0,console.log("Settings saved:",i)}catch(s){console.error("Error saving settings:",s)}finally{o.value=!1}},B=s=>({full:"bg-blue-100 text-blue-800",database:"bg-green-100 text-green-800"})[s]||"bg-gray-100 text-gray-800",C=s=>({full:"Full Backup",database:"Database Only"})[s]||s,U=s=>({completed:"bg-green-100 text-green-800",processing:"bg-yellow-100 text-yellow-800",failed:"bg-red-100 text-red-800"})[s]||"bg-gray-100 text-gray-800",I=s=>({completed:"Selesai",processing:"Proses",failed:"Gagal"})[s]||s,M=s=>{if(s===0)return"0 Bytes";const t=1024,a=["Bytes","KB","MB","GB"],g=Math.floor(Math.log(s)/Math.log(t));return parseFloat((s/Math.pow(t,g)).toFixed(2))+" "+a[g]},F=s=>new Date(s).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return P(()=>{k()}),(s,t)=>(r(),l("div",G,[t[24]||(t[24]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Backup & Restore"),e("p",{class:"text-gray-600"},"Kelola backup dan restore data sistem")],-1)),e("div",K,[e("nav",O,[(r(),l(h,null,_(j,a=>e("button",{key:a.id,onClick:g=>m.value=a.id,class:y(["whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm",m.value===a.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},n(a.name),11,Q)),64))])]),m.value==="backup"?(r(),l("div",W,[e("div",X,[t[6]||(t[6]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Buat Backup",-1)),e("div",Y,[e("div",ee,[t[4]||(t[4]=D('<div class="flex items-center mb-3" data-v-a2c211fe><div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3" data-v-a2c211fe><svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-a2c211fe><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12" data-v-a2c211fe></path></svg></div><h4 class="text-lg font-semibold text-gray-900" data-v-a2c211fe>Full Backup</h4></div><p class="text-sm text-gray-600 mb-4" data-v-a2c211fe>Backup semua data sistem termasuk database, file, dan konfigurasi</p>',2)),e("button",{onClick:R,disabled:o.value,class:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50"},[o.value&&c.value==="full"?(r(),l("span",se,"Membuat Backup...")):(r(),l("span",ae,"Buat Full Backup"))],8,te)]),e("div",oe,[t[5]||(t[5]=D('<div class="flex items-center mb-3" data-v-a2c211fe><div class="w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center mr-3" data-v-a2c211fe><svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-a2c211fe><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4" data-v-a2c211fe></path></svg></div><h4 class="text-lg font-semibold text-gray-900" data-v-a2c211fe>Database Only</h4></div><p class="text-sm text-gray-600 mb-4" data-v-a2c211fe>Backup hanya database tanpa file dan konfigurasi</p>',2)),e("button",{onClick:T,disabled:o.value,class:"w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50"},[o.value&&c.value==="database"?(r(),l("span",re,"Membuat Backup...")):(r(),l("span",ne,"Buat Database Backup"))],8,le)])])]),e("div",ie,[t[8]||(t[8]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Riwayat Backup")],-1)),e("div",de,[e("table",ue,[t[7]||(t[7]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Nama File"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Jenis"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Ukuran"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tanggal"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Aksi")])],-1)),e("tbody",ce,[(r(!0),l(h,null,_(f.value,a=>(r(),l("tr",{key:a.id,class:"hover:bg-gray-50"},[e("td",pe,[e("div",ge,n(a.nama_file),1),e("div",me,n(a.deskripsi),1)]),e("td",fe,[e("span",{class:y([B(a.jenis),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},n(C(a.jenis)),3)]),e("td",be,n(M(a.ukuran)),1),e("td",xe,n(F(a.tanggal)),1),e("td",ye,[e("span",{class:y([U(a.status),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},n(I(a.status)),3)]),e("td",ve,[e("button",{onClick:g=>z(a),class:"text-blue-600 hover:text-blue-900 mr-3"}," Download ",8,ke),e("button",{onClick:g=>A(a.id),class:"text-red-600 hover:text-red-900"}," Hapus ",8,he)])]))),128))])])])])])):b("",!0),m.value==="restore"?(r(),l("div",_e,[e("div",we,[t[14]||(t[14]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Restore dari File",-1)),e("div",Be,[e("div",Ce,[t[11]||(t[11]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48"},[e("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),e("div",Me,[e("label",Fe,[t[9]||(t[9]=e("span",{class:"mt-2 block text-sm font-medium text-gray-900"}," Upload file backup ",-1)),t[10]||(t[10]=e("span",{class:"mt-1 block text-sm text-gray-500"}," atau drag and drop file backup di sini ",-1)),e("input",{id:"file-upload",ref_key:"fileInput",ref:v,type:"file",accept:".sql,.zip,.tar.gz",onChange:V,class:"sr-only"},null,544)])]),t[12]||(t[12]=e("p",{class:"mt-2 text-xs text-gray-500"}," File yang didukung: .sql, .zip, .tar.gz (maksimal 100MB) ",-1))])]),d.value?(r(),l("div",De,[e("div",Se,[e("div",null,[e("p",je,n(d.value.name),1),e("p",Re,n(M(d.value.size)),1)]),e("button",{onClick:w,class:"text-red-600 hover:text-red-900"},[...t[13]||(t[13]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])])):b("",!0),e("div",Te,[e("button",{onClick:E,disabled:!d.value||o.value,class:"w-full bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 disabled:opacity-50"},[o.value&&p.value==="file"?(r(),l("span",Ae,"Memulihkan...")):(r(),l("span",Ve,"Restore dari File"))],8,ze)])]),e("div",Ee,[t[16]||(t[16]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Restore dari Riwayat Backup")],-1)),e("div",Le,[e("table",qe,[t[15]||(t[15]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Nama File"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Jenis"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tanggal"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Aksi")])],-1)),e("tbody",Ue,[(r(!0),l(h,null,_(f.value,a=>(r(),l("tr",{key:a.id,class:"hover:bg-gray-50"},[e("td",Ie,[e("div",Je,n(a.nama_file),1),e("div",Ne,n(a.deskripsi),1)]),e("td",Pe,[e("span",{class:y([B(a.jenis),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},n(C(a.jenis)),3)]),e("td",He,n(F(a.tanggal)),1),e("td",$e,[e("button",{onClick:g=>L(a),disabled:o.value,class:"text-green-600 hover:text-green-900 disabled:opacity-50"},[o.value&&p.value==="backup"?(r(),l("span",Ge,"Memulihkan...")):(r(),l("span",Ke,"Restore"))],8,Ze)])]))),128))])])])])])):b("",!0),m.value==="settings"?(r(),l("div",Oe,[e("div",Qe,[t[23]||(t[23]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Pengaturan Backup")],-1)),e("div",We,[e("form",{onSubmit:H(q,["prevent"]),class:"space-y-6"},[e("div",Xe,[e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Auto Backup",-1)),e("div",Ye,[e("label",et,[x(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>i.auto_backup_enabled=a),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[$,i.auto_backup_enabled]]),t[17]||(t[17]=e("span",{class:"ml-2 text-sm text-gray-700"},"Aktifkan auto backup",-1))])])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Frekuensi Backup",-1)),x(e("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>i.backup_frequency=a),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[...t[19]||(t[19]=[e("option",{value:"daily"},"Harian",-1),e("option",{value:"weekly"},"Mingguan",-1),e("option",{value:"monthly"},"Bulanan",-1)])],512),[[Z,i.backup_frequency]])])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Retensi Backup",-1)),x(e("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>i.backup_retention=a),type:"number",min:"1",max:"365",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Jumlah hari backup disimpan"},null,512),[[S,i.backup_retention]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Lokasi Backup",-1)),x(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>i.backup_location=a),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Path lokasi backup"},null,512),[[S,i.backup_location]])]),e("div",tt,[e("button",{type:"submit",disabled:o.value,class:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50"},[o.value?(r(),l("span",at,"Menyimpan...")):(r(),l("span",ot,"Simpan Pengaturan"))],8,st)])],32)])])])):b("",!0)]))}},it=J(lt,[["__scopeId","data-v-a2c211fe"]]);export{it as default};
