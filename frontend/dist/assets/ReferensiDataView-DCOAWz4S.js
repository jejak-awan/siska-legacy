import{H as me,I as V,A as le,J as se,K as r,L as ie,M as ce,N as pe,p as f,E as y,a as re,c as n,o as l,f as e,s as A,x as w,y as D,z as oe,F as S,k as q,j as G,t as x,v as B,d as L,C as ne}from"./index-Bo0LgBjO.js";function W(b,g={},h={}){const d=le(),u=me({validationSchema:b,initialValues:g,...h}),j=async(o,c=null)=>{try{const{valid:i}=await u.validate();return i?(await o(u.values),{success:!0,data:u.values}):(d.error("Mohon perbaiki error pada form"),{success:!1,errors:u.errors.value})}catch(i){return console.error("Form submission error:",i),c?c(i):d.error("Terjadi kesalahan saat mengirim form"),{success:!1,error:i}}},M=()=>{u.resetForm()},F=o=>{u.setValues(o)},K=(o,c)=>{u.setFieldError(o,c)},_=o=>{u.clearErrors(o)};return{values:u.values,errors:u.errors,meta:u.meta,isValid:u.meta.value.valid,isSubmitting:u.meta.value.isSubmitting,handleSubmit:j,resetForm:M,setValues:F,setFieldError:K,clearFieldError:_,validate:u.validate,validateField:u.validateField}}const Q={siswa:V({username:r().required("Username wajib diisi").username("Username tidak valid").min(3,"Username minimal 3 karakter").max(20,"Username maksimal 20 karakter"),email:r().required("Email wajib diisi").email("Format email tidak valid"),password:r().when("$isEdit",{is:!1,then:b=>b.required("Password wajib diisi"),otherwise:b=>b.notRequired()}).min(6,"Password minimal 6 karakter"),nisn:r().required("NISN wajib diisi").nisn("NISN harus 10 digit"),nis:r().required("NIS wajib diisi").min(1,"NIS tidak boleh kosong"),nik:r().required("NIK wajib diisi").nik("NIK harus 16 digit"),nama_lengkap:r().required("Nama lengkap wajib diisi").min(2,"Nama minimal 2 karakter").max(100,"Nama maksimal 100 karakter"),nama_panggilan:r().max(50,"Nama panggilan maksimal 50 karakter"),jenis_kelamin:r().required("Jenis kelamin wajib dipilih").oneOf(["L","P"],"Jenis kelamin tidak valid"),tempat_lahir:r().required("Tempat lahir wajib diisi").min(2,"Tempat lahir minimal 2 karakter"),tanggal_lahir:pe().required("Tanggal lahir wajib diisi").max(new Date,"Tanggal lahir tidak boleh di masa depan"),agama:r().required("Agama wajib dipilih").oneOf(["Islam","Kristen","Katolik","Hindu","Buddha","Konghucu"],"Agama tidak valid"),kewarganegaraan:r().required("Kewarganegaraan wajib dipilih").oneOf(["WNI","WNA"],"Kewarganegaraan tidak valid"),kelas_id:ie().nullable().transform((b,g)=>g===""?null:b),angkatan:r().required("Angkatan wajib diisi").matches(/^\d{4}$/,"Angkatan harus 4 digit tahun"),status_siswa:r().required("Status siswa wajib dipilih").oneOf(["Aktif","Lulus","Pindah","Keluar","Mengundurkan Diri"],"Status siswa tidak valid"),nomor_hp:r().phone("Nomor HP tidak valid"),email_pribadi:r().email("Format email pribadi tidak valid"),alamat_lengkap:r().required("Alamat lengkap wajib diisi").min(10,"Alamat minimal 10 karakter"),kelurahan:r().required("Kelurahan wajib diisi"),kecamatan:r().required("Kecamatan wajib diisi"),kabupaten_kota:r().required("Kabupaten/Kota wajib diisi"),provinsi:r().required("Provinsi wajib diisi")}),referenceCategory:V({name:r().required("Nama kategori wajib diisi").min(2,"Nama kategori minimal 2 karakter").max(100,"Nama kategori maksimal 100 karakter"),description:r().max(500,"Deskripsi maksimal 500 karakter"),fields_config:ce().of(V({name:r().required("Nama field wajib diisi"),label:r().required("Label field wajib diisi"),type:r().required("Tipe field wajib dipilih"),required:se()})).min(1,"Minimal 1 field harus dikonfigurasi")}),referenceData:V({category_id:ie().required("Kategori wajib dipilih").positive("Kategori tidak valid"),code:r().max(50,"Kode maksimal 50 karakter"),name:r().required("Nama data wajib diisi").min(2,"Nama data minimal 2 karakter").max(100,"Nama data maksimal 100 karakter"),description:r().max(500,"Deskripsi maksimal 500 karakter")}),login:V({username:r().required("Username atau email wajib diisi"),password:r().required("Password wajib diisi").min(1,"Password tidak boleh kosong"),remember:se()})};function ge(){const b=f(!1),g=f(null),h=le(),d=async(i,m={})=>{var H,P,z,R;const{showLoading:p=!0,showError:C=!0,showSuccess:$=!1,successMessage:T="Operasi berhasil",errorMessage:O="Terjadi kesalahan",onSuccess:E=null,onError:U=null}=m;try{p&&(b.value=!0),g.value=null;const k=await i();return $&&T&&h.success(T),E&&E(k),{success:!0,data:k.data,response:k}}catch(k){console.error("API call error:",k);const I=((P=(H=k.response)==null?void 0:H.data)==null?void 0:P.message)||O;return g.value=I,C&&h.error(I),U&&U(k),{success:!1,error:k,message:I,validationErrors:((R=(z=k.response)==null?void 0:z.data)==null?void 0:R.errors)||{}}}finally{p&&(b.value=!1)}};return{loading:b,error:g,call:d,get:async(i,m={})=>d(()=>y.get(i),m),post:async(i,m,p={})=>d(()=>y.post(i,m),p),put:async(i,m,p={})=>d(()=>y.put(i,m),p),patch:async(i,m,p={})=>d(()=>y.patch(i,m),p),delete:async(i,m={})=>d(()=>y.delete(i),m),submitForm:async(i,m,p="POST",C={})=>d(()=>{switch(p.toUpperCase()){case"PUT":return y.put(i,m);case"PATCH":return y.patch(i,m);case"DELETE":return y.delete(i);default:return y.post(i,m)}},{showSuccess:!0,successMessage:C.successMessage||"Data berhasil disimpan",...C}),uploadFile:async(i,m,p={})=>{const C=new FormData;return C.append("file",m),d(()=>y.post(i,C,{headers:{"Content-Type":"multipart/form-data"}}),{showSuccess:!0,successMessage:p.successMessage||"File berhasil diupload",...p})},clearError:()=>{g.value=null}}}const ve={class:"p-6"},fe={class:"mb-6 flex justify-between items-center"},be={class:"flex space-x-4"},xe={class:"flex-1 max-w-md"},ke=["value"],we={class:"flex space-x-3"},ye={class:"bg-white rounded-lg shadow-sm border border-gray-200 mb-8"},he={class:"overflow-x-auto"},Ce={class:"min-w-full divide-y divide-gray-200"},De={class:"bg-white divide-y divide-gray-200"},je=["onClick"],Ke={class:"px-6 py-4 whitespace-nowrap"},_e={class:"flex items-center"},Ae={class:"text-sm font-medium text-gray-900"},Me={class:"px-6 py-4"},Ne={class:"text-sm text-gray-900 max-w-xs truncate"},Se={class:"px-6 py-4 whitespace-nowrap"},qe={class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800"},Be={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Fe={class:"px-6 py-4 whitespace-nowrap"},Le=["onClick","title"],Ie={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Ve={class:"flex space-x-2"},$e=["onClick"],Te=["onClick"],Ee=["onClick"],Ue={key:0,class:"text-center py-12"},He={class:"mt-6"},Pe={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},ze={class:"relative top-20 mx-auto p-5 border w-11/12 max-w-6xl shadow-lg rounded-md bg-white"},Re={class:"mt-3"},Je={class:"flex justify-between items-center mb-4"},Oe={class:"text-lg font-medium text-gray-900"},Ge={class:"mb-4 flex justify-between items-center"},We={class:"flex space-x-4"},Qe={class:"flex-1 max-w-md"},Xe={class:"overflow-x-auto max-h-96"},Ye={class:"min-w-full divide-y divide-gray-200"},Ze={class:"bg-gray-50 sticky top-0"},et={class:"bg-white divide-y divide-gray-200"},tt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},at={class:"flex space-x-2"},st=["onClick"],it=["onClick"],rt={key:0,class:"text-center py-8"},ot={key:1,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},nt={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},lt={class:"mt-3"},dt={class:"mb-4"},ut={class:"mb-4"},mt={class:"flex justify-end space-x-3"},ct={key:2,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},pt={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},gt={class:"mt-3"},vt={class:"mb-4"},ft=["value"],bt={class:"mb-4"},xt={class:"mb-4"},kt={class:"flex justify-end space-x-3"},wt={key:3,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},yt={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},ht={class:"mt-3"},Ct={class:"mb-4"},Dt={class:"mb-4"},jt={class:"mb-4"},Kt={class:"flex justify-end space-x-3"},_t={key:4,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},At={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},Mt={class:"mt-3"},Nt={class:"mt-3 text-center"},St={class:"mt-2"},qt={class:"text-sm text-gray-500"},Bt={key:0,class:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md"},Ft={class:"text-sm text-yellow-700 list-disc list-inside"},Lt={class:"mt-5 flex justify-center space-x-3"},It=["disabled"],$t={__name:"ReferensiDataView",setup(b){const g=f(""),h=f(""),d=f(null),u=f(!1),j=f(!1),M=f(!1),F=f(!1),K=f(!1),_=f(""),o=f(null);ge(),W(Q.referenceCategory,{name:"",description:"",fields_config:[{name:"name",label:"Nama",type:"text",required:!0},{name:"code",label:"Kode",type:"text",required:!1}]}),W(Q.referenceData,{category_id:"",code:"",name:"",description:""});const c=W(Q.referenceData,{id:null,category_id:"",code:"",name:"",description:""}),i=f([{id:1,name:"Jenis Kelamin",description:"Referensi data jenis kelamin",dataCount:2,isActive:!0,updatedAt:new Date,fields:[{id:1,name:"code",label:"Kode",type:"text"},{id:2,name:"name",label:"Nama",type:"text"}],data:[{id:1,code:"L",name:"Laki-laki",isActive:!0},{id:2,code:"P",name:"Perempuan",isActive:!0}]},{id:2,name:"Agama",description:"Referensi data agama",dataCount:6,isActive:!0,updatedAt:new Date,fields:[{id:1,name:"code",label:"Kode",type:"text"},{id:2,name:"name",label:"Nama",type:"text"}],data:[{id:1,code:"ISL",name:"Islam",isActive:!0},{id:2,code:"KRI",name:"Kristen",isActive:!0},{id:3,code:"KAT",name:"Katolik",isActive:!0},{id:4,code:"HIN",name:"Hindu",isActive:!0},{id:5,code:"BUD",name:"Buddha",isActive:!0},{id:6,code:"KON",name:"Konghucu",isActive:!0}]},{id:3,name:"Status Perkawinan",description:"Referensi data status perkawinan",dataCount:4,isActive:!0,updatedAt:new Date,fields:[{id:1,name:"code",label:"Kode",type:"text"},{id:2,name:"name",label:"Nama",type:"text"}],data:[{id:1,code:"BLM",name:"Belum Menikah",isActive:!0},{id:2,code:"NIK",name:"Menikah",isActive:!0},{id:3,code:"CER",name:"Cerai Hidup",isActive:!0},{id:4,code:"MEN",name:"Cerai Mati",isActive:!0}]}]),m=re(()=>{let a=i.value;return g.value&&(a=a.filter(t=>t.name.toLowerCase().includes(g.value.toLowerCase())||t.description.toLowerCase().includes(g.value.toLowerCase()))),h.value&&(a=a.filter(t=>t.id===h.value)),a}),p=re(()=>{if(!d.value)return[];let a=d.value.data;return _.value&&(a=a.filter(t=>Object.values(t).some(v=>String(v).toLowerCase().includes(_.value.toLowerCase())))),a}),C=a=>{d.value=a},$=a=>{d.value=a,F.value=!0,_.value=""},T=a=>{a.isActive=!a.isActive,a.updatedAt=new Date},O=a=>{console.log("Edit category:",a)},E=a=>{const t=U(a);o.value={type:"category",id:a.id,name:a.name,usage:t},K.value=!0},U=a=>{const t=[];return a.name==="Jenis Kelamin"?(t.push("Data Siswa (Field: Jenis Kelamin)"),t.push("Data Guru (Field: Jenis Kelamin)")):a.name==="Agama"?(t.push("Data Siswa (Field: Agama)"),t.push("Data Guru (Field: Agama)")):a.name==="Status Perkawinan"&&t.push("Data Guru (Field: Status Perkawinan)"),t},H=(a,t)=>{const v=[];return a.code==="L"||a.code==="P"?(v.push("Data Siswa (Field: Jenis Kelamin)"),v.push("Data Guru (Field: Jenis Kelamin)")):(a.code==="ISL"||a.code==="KRI"||a.code==="KAT")&&(v.push("Data Siswa (Field: Agama)"),v.push("Data Guru (Field: Agama)")),v},P=a=>{c.value={id:a.id,name:a.name,code:a.code||"",description:a.description||""},M.value=!0},z=()=>{const a=i.value.find(t=>t.id===d.value.id);if(a){const t=a.data.findIndex(v=>v.id===c.value.id);t>-1&&(a.data[t]={...a.data[t],name:c.value.name,code:c.value.code,description:c.value.description})}M.value=!1,c.value={id:null,name:"",code:"",description:""}},R=a=>{const t=H(a,d.value);o.value={type:"data",id:a.id,name:a.name,usage:t},K.value=!0},k=()=>{if(o.value.type==="category"){const a=i.value.findIndex(t=>t.id===o.value.id);a>-1&&i.value.splice(a,1)}else if(o.value.type==="data"){const a=i.value.find(t=>t.id===d.value.id);if(a){const t=a.data.findIndex(v=>v.id===o.value.id);t>-1&&(a.data.splice(t,1),a.dataCount=a.data.length)}}K.value=!1,o.value=null},I=()=>{const a=Math.max(...i.value.map(t=>t.id))+1;i.value.push({id:a,name:newCategory.value.name,description:newCategory.value.description,dataCount:0,updatedAt:new Date,fields:[],data:[]}),newCategory.value={name:"",description:""},u.value=!1},de=()=>{console.log("Create data:",newData.value),newData.value={categoryId:"",name:"",description:""},j.value=!1},ue=a=>new Date(a).toLocaleDateString("id-ID");return(a,t)=>{var v,X,Y,Z,ee,te,ae;return l(),n("div",ve,[t[56]||(t[56]=e("div",{class:"mb-6"},[e("h1",{class:"text-2xl font-bold text-gray-900 mb-2"},"Referensi Data"),e("p",{class:"text-gray-600"},"Kelola data referensi yang dapat digunakan oleh proses lain dalam sistem")],-1)),e("div",fe,[e("div",be,[e("div",xe,[w(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>g.value=s),type:"text",placeholder:"Cari referensi data...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[D,g.value]])]),w(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>h.value=s),class:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},[t[20]||(t[20]=e("option",{value:""},"Semua Kategori",-1)),(l(!0),n(S,null,q(i.value,s=>(l(),n("option",{key:s.id,value:s.id},x(s.name),9,ke))),128))],512),[[oe,h.value]])]),e("div",we,[e("button",{onClick:t[2]||(t[2]=s=>u.value=!0),class:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"}," + Kategori Baru "),e("button",{onClick:t[3]||(t[3]=s=>j.value=!0),class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"}," + Data Baru ")])]),e("div",ye,[t[30]||(t[30]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Kategori Referensi Data")],-1)),e("div",he,[e("table",Ce,[t[25]||(t[25]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Nama Kategori"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Deskripsi"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Jumlah Data"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Terakhir Update"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Aksi")])],-1)),e("tbody",De,[(l(!0),n(S,null,q(m.value,s=>(l(),n("tr",{key:s.id,class:"hover:bg-gray-50 cursor-pointer",onClick:N=>C(s)},[e("td",Ke,[e("div",_e,[e("div",Ae,x(s.name),1)])]),e("td",Me,[e("div",Ne,x(s.description),1)]),e("td",Se,[e("span",qe,x(s.dataCount)+" data ",1)]),e("td",Be,x(ue(s.updatedAt)),1),e("td",Fe,[e("button",{onClick:B(N=>T(s),["stop"]),class:ne(["p-1 rounded-full transition-colors",s.isActive?"text-green-600 hover:text-green-800 hover:bg-green-50":"text-gray-400 hover:text-gray-600 hover:bg-gray-50"]),title:s.isActive?"Klik untuk nonaktifkan":"Klik untuk aktifkan"},[...t[21]||(t[21]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],10,Le)]),e("td",Ie,[e("div",Ve,[e("button",{onClick:B(N=>$(s),["stop"]),class:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",title:"Lihat Data"},[...t[22]||(t[22]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,$e),e("button",{onClick:B(N=>O(s),["stop"]),class:"text-indigo-600 hover:text-indigo-900 p-1 rounded hover:bg-indigo-50",title:"Edit Kategori"},[...t[23]||(t[23]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,Te),e("button",{onClick:B(N=>E(s),["stop"]),class:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50",title:"Hapus Kategori"},[...t[24]||(t[24]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Ee)])])],8,je))),128))])])]),m.value.length===0?(l(),n("div",Ue,[t[27]||(t[27]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),t[28]||(t[28]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Tidak ada kategori referensi",-1)),t[29]||(t[29]=e("p",{class:"mt-1 text-sm text-gray-500"},"Mulai dengan membuat kategori referensi data baru.",-1)),e("div",He,[e("button",{onClick:t[4]||(t[4]=s=>u.value=!0),class:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},[...t[26]||(t[26]=[e("svg",{class:"-ml-1 mr-2 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),G(" Buat Kategori Baru ",-1)])])])])):A("",!0)]),F.value?(l(),n("div",Pe,[e("div",ze,[e("div",Re,[e("div",Je,[e("h3",Oe,x((v=d.value)==null?void 0:v.name)+" - Data Referensi",1),e("button",{onClick:t[5]||(t[5]=s=>F.value=!1),class:"text-gray-400 hover:text-gray-600"},[...t[31]||(t[31]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Ge,[e("div",We,[e("div",Qe,[w(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>_.value=s),type:"text",placeholder:"Cari data...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[D,_.value]])])]),e("button",{onClick:t[7]||(t[7]=s=>j.value=!0),class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"}," + Tambah Data ")]),e("div",Xe,[e("table",Ye,[e("thead",Ze,[e("tr",null,[(l(!0),n(S,null,q((X=d.value)==null?void 0:X.fields,s=>(l(),n("th",{key:s.id,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},x(s.label),1))),128)),t[32]||(t[32]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Aksi",-1))])]),e("tbody",et,[(l(!0),n(S,null,q(p.value,s=>{var N;return l(),n("tr",{key:s.id},[(l(!0),n(S,null,q((N=d.value)==null?void 0:N.fields,J=>(l(),n("td",{key:J.id,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},x(s[J.name]),1))),128)),e("td",tt,[e("div",at,[e("button",{onClick:J=>P(s),class:"text-indigo-600 hover:text-indigo-900 p-1 rounded hover:bg-indigo-50",title:"Edit Data"},[...t[33]||(t[33]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,st),e("button",{onClick:J=>R(s),class:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50",title:"Hapus Data"},[...t[34]||(t[34]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,it)])])])}),128))])])]),p.value.length===0?(l(),n("div",rt,[...t[35]||(t[35]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Tidak ada data",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"Mulai dengan menambahkan data referensi baru.",-1)])])):A("",!0)])])])):A("",!0),u.value?(l(),n("div",ot,[e("div",nt,[e("div",lt,[t[39]||(t[39]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Buat Kategori Referensi Baru",-1)),e("form",{onSubmit:B(I,["prevent"])},[e("div",dt,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nama Kategori",-1)),w(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>a.newCategory.name=s),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Masukkan nama kategori"},null,512),[[D,a.newCategory.name]])]),e("div",ut,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Deskripsi",-1)),w(e("textarea",{"onUpdate:modelValue":t[9]||(t[9]=s=>a.newCategory.description=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:"Masukkan deskripsi kategori"},null,512),[[D,a.newCategory.description]])]),e("div",mt,[e("button",{type:"button",onClick:t[10]||(t[10]=s=>u.value=!1),class:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50"}," Batal "),t[38]||(t[38]=e("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"}," Buat Kategori ",-1))])],32)])])])):A("",!0),j.value?(l(),n("div",ct,[e("div",pt,[e("div",gt,[t[45]||(t[45]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Tambah Data Referensi",-1)),e("form",{onSubmit:B(de,["prevent"])},[e("div",vt,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Kategori",-1)),w(e("select",{"onUpdate:modelValue":t[11]||(t[11]=s=>a.newData.categoryId=s),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},[t[40]||(t[40]=e("option",{value:""},"Pilih Kategori",-1)),(l(!0),n(S,null,q(i.value,s=>(l(),n("option",{key:s.id,value:s.id},x(s.name),9,ft))),128))],512),[[oe,a.newData.categoryId]])]),e("div",bt,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nama Data",-1)),w(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>a.newData.name=s),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Masukkan nama data"},null,512),[[D,a.newData.name]])]),e("div",xt,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Deskripsi",-1)),w(e("textarea",{"onUpdate:modelValue":t[13]||(t[13]=s=>a.newData.description=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:"Masukkan deskripsi data"},null,512),[[D,a.newData.description]])]),e("div",kt,[e("button",{type:"button",onClick:t[14]||(t[14]=s=>j.value=!1),class:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50"}," Batal "),t[44]||(t[44]=e("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"}," Tambah Data ",-1))])],32)])])])):A("",!0),M.value?(l(),n("div",wt,[e("div",yt,[e("div",ht,[t[50]||(t[50]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Edit Data Referensi",-1)),e("form",{onSubmit:B(z,["prevent"])},[e("div",Ct,[t[46]||(t[46]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nama Data",-1)),w(e("input",{"onUpdate:modelValue":t[15]||(t[15]=s=>L(c).name=s),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Masukkan nama data"},null,512),[[D,L(c).name]])]),e("div",Dt,[t[47]||(t[47]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Kode (Opsional)",-1)),w(e("input",{"onUpdate:modelValue":t[16]||(t[16]=s=>L(c).code=s),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Masukkan kode data"},null,512),[[D,L(c).code]])]),e("div",jt,[t[48]||(t[48]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Deskripsi",-1)),w(e("textarea",{"onUpdate:modelValue":t[17]||(t[17]=s=>L(c).description=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:"Masukkan deskripsi data"},null,512),[[D,L(c).description]])]),e("div",Kt,[e("button",{type:"button",onClick:t[18]||(t[18]=s=>M.value=!1),class:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50"}," Batal "),t[49]||(t[49]=e("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"}," Simpan Perubahan ",-1))])],32)])])])):A("",!0),K.value?(l(),n("div",_t,[e("div",At,[e("div",Mt,[t[55]||(t[55]=e("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[e("svg",{class:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),e("div",Nt,[t[54]||(t[54]=e("h3",{class:"text-lg font-medium text-gray-900"},"Konfirmasi Hapus",-1)),e("div",St,[e("p",qt,[G(" Apakah Anda yakin ingin menghapus "+x(((Y=o.value)==null?void 0:Y.type)==="category"?"kategori":"data")+" ",1),e("strong",null,'"'+x((Z=o.value)==null?void 0:Z.name)+'"',1),t[51]||(t[51]=G("? ",-1))]),(ee=o.value)!=null&&ee.usage&&o.value.usage.length>0?(l(),n("div",Bt,[t[52]||(t[52]=e("p",{class:"text-sm text-yellow-800 font-medium mb-2"},"Referensi ini sedang digunakan oleh:",-1)),e("ul",Ft,[(l(!0),n(S,null,q(o.value.usage,s=>(l(),n("li",{key:s},x(s),1))),128))]),t[53]||(t[53]=e("p",{class:"text-sm text-yellow-800 mt-2 font-medium"}," Referensi tidak dapat dihapus karena masih digunakan. Nonaktifkan terlebih dahulu. ",-1))])):A("",!0)])]),e("div",Lt,[e("button",{onClick:t[19]||(t[19]=s=>K.value=!1),class:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50"}," Batal "),e("button",{onClick:k,disabled:((te=o.value)==null?void 0:te.usage)&&o.value.usage.length>0,class:ne(["px-4 py-2 rounded-md text-white",(ae=o.value)!=null&&ae.usage&&o.value.usage.length>0?"bg-gray-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700"])}," Hapus ",10,It)])])])])):A("",!0)])}}};export{$t as default};
