import{_ as S,p,q as U,e as B,c as i,o as n,f as e,s as N,F as f,k as y,t as r,j as P,v as T,x as g,y as _,z as $,C as M,D as q}from"./index-Bo0LgBjO.js";const F={class:"hak-akses-view"},G={class:"mb-6"},L={class:"flex space-x-8","aria-label":"Tabs"},O=["onClick"],J={class:"bg-white rounded-lg shadow-sm border border-gray-200"},W={class:"px-6 py-4 border-b border-gray-200"},Q={class:"flex justify-between items-center"},X={class:"text-lg font-semibold text-gray-900"},Y=["disabled"],Z={key:0},I={key:1},ee={class:"overflow-x-auto"},te={class:"min-w-full"},se={class:"bg-white divide-y divide-gray-200"},ae={class:"px-6 py-4 whitespace-nowrap"},oe={class:"flex items-center"},ie={class:"flex-shrink-0"},ne={class:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center"},re={class:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},le=["d"],de={class:"ml-3"},ue={class:"text-sm font-medium text-gray-900"},ce={class:"text-sm text-gray-500"},pe=["id","onUpdate:modelValue"],me={class:"mt-8 bg-white rounded-lg shadow-sm border border-gray-200"},xe={class:"px-6 py-4 border-b border-gray-200"},ge={class:"flex justify-between items-center"},be={class:"overflow-x-auto"},ve={class:"min-w-full divide-y divide-gray-200"},fe={class:"bg-white divide-y divide-gray-200"},ye={class:"px-6 py-4 whitespace-nowrap"},he={class:"flex items-center"},ke={class:"flex-shrink-0"},we={class:"text-xs font-bold text-white"},_e={class:"ml-3"},Me={class:"text-sm font-medium text-gray-900"},Ce={class:"text-sm text-gray-500"},Ae={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Re={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ee={class:"px-6 py-4 whitespace-nowrap"},ze={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},je=["onClick"],He=["onClick","disabled"],Ve={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},De={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},Ke={class:"mt-3"},Se={class:"text-lg font-medium text-gray-900 mb-4"},Ue={class:"flex justify-end space-x-3 pt-4"},Be=["disabled"],Ne={__name:"HakAksesView",setup(Pe){const l=p(!1),m=p("admin"),h=p(!1),x=p(!1),b=p(null),d=p([]),v=p([]),k=["view","create","edit","delete","export","import"],u=p({}),o=U({name:"",code:"",description:"",status:!0}),A=async()=>{try{l.value=!0,d.value=[{id:"admin",name:"Administrator",code:"admin",description:"Akses penuh ke semua fitur sistem",userCount:2,status:!0},{id:"guru",name:"Guru",code:"guru",description:"Akses untuk mengelola kelas dan siswa",userCount:25,status:!0},{id:"wali_kelas",name:"Wali Kelas",code:"wali_kelas",description:"Akses untuk mengelola kelas yang diampu",userCount:12,status:!0},{id:"siswa",name:"Siswa",code:"siswa",description:"Akses terbatas untuk melihat data pribadi",userCount:1250,status:!0}],v.value=[{id:"dashboard",name:"Dashboard",description:"Halaman utama sistem",icon:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"},{id:"users",name:"Manajemen User",description:"Kelola pengguna sistem",icon:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"},{id:"siswa",name:"Data Siswa",description:"Kelola data siswa",icon:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"},{id:"guru",name:"Data Guru",description:"Kelola data guru",icon:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"},{id:"presensi",name:"Presensi",description:"Kelola presensi siswa",icon:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},{id:"kredit-poin",name:"Kredit Poin",description:"Kelola sistem poin karakter",icon:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"}],R()}catch(a){console.error("Error loading hak akses:",a)}finally{l.value=!1}},R=()=>{d.value.forEach(a=>{u.value[a.id]={},v.value.forEach(t=>{u.value[a.id][t.id]={},k.forEach(s=>{u.value[a.id][t.id][s]=E(a.id,t.id,s)})})})},E=(a,t,s)=>{if(a==="admin")return!0;if(a==="siswa")return t==="dashboard"&&s==="view";if(a==="guru"||a==="wali_kelas"){const c=["dashboard","siswa","presensi","kredit-poin"],w=["view","create","edit"];return c.includes(t)&&w.includes(s)}return!1},z=a=>{const t=d.value.find(s=>s.id===a);return t?t.name:a},j=a=>({admin:"bg-red-500",guru:"bg-blue-500",wali_kelas:"bg-green-500",siswa:"bg-yellow-500"})[a]||"bg-gray-500",H=async()=>{try{l.value=!0,console.log("Permissions saved:",u.value)}catch(a){console.error("Error saving permissions:",a)}finally{l.value=!1}},V=a=>{b.value=a,Object.assign(o,a),x.value=!0},D=async a=>{if(confirm("Apakah Anda yakin ingin menghapus role ini?"))try{d.value=d.value.filter(t=>t.id!==a)}catch(t){console.error("Error deleting role:",t)}},K=async()=>{try{if(l.value=!0,x.value){const a=d.value.findIndex(t=>t.id===b.value.id);a!==-1&&(d.value[a]={...b.value,...o})}else{const a={id:o.code,userCount:0,...o};d.value.push(a),u.value[a.id]={},v.value.forEach(t=>{u.value[a.id][t.id]={},k.forEach(s=>{u.value[a.id][t.id][s]=!1})})}C()}catch(a){console.error("Error saving role:",a)}finally{l.value=!1}},C=()=>{h.value=!1,x.value=!1,b.value=null,Object.assign(o,{name:"",code:"",description:"",status:!0})};return B(()=>{A()}),(a,t)=>(n(),i("div",F,[t[14]||(t[14]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Hak Akses"),e("p",{class:"text-gray-600"},"Kelola hak akses dan permission untuk setiap role")],-1)),e("div",G,[e("nav",L,[(n(!0),i(f,null,y(d.value,s=>(n(),i("button",{key:s.id,onClick:c=>m.value=s.id,class:M(["whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm",m.value===s.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},r(s.name),11,O))),128))])]),e("div",J,[e("div",W,[e("div",Q,[e("h3",X," Matriks Hak Akses - "+r(z(m.value)),1),e("button",{onClick:H,disabled:l.value,class:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50"},[l.value?(n(),i("span",Z,"Menyimpan...")):(n(),i("span",I,"Simpan Perubahan"))],8,Y)])]),e("div",ee,[e("table",te,[t[5]||(t[5]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Modul"),e("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"Lihat"),e("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tambah"),e("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"Edit"),e("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"Hapus"),e("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"Export"),e("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"Import")])],-1)),e("tbody",se,[(n(!0),i(f,null,y(v.value,s=>(n(),i("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",ae,[e("div",oe,[e("div",ie,[e("div",ne,[(n(),i("svg",re,[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:s.icon},null,8,le)]))])]),e("div",de,[e("div",ue,r(s.name),1),e("div",ce,r(s.description),1)])])]),(n(),i(f,null,y(k,c=>e("td",{key:c,class:"px-6 py-4 whitespace-nowrap text-center"},[g(e("input",{id:`${s.id}-${c}`,"onUpdate:modelValue":w=>u.value[m.value][s.id][c]=w,type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,8,pe),[[q,u.value[m.value][s.id][c]]])])),64))]))),128))])])])]),e("div",me,[e("div",xe,[e("div",ge,[t[7]||(t[7]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Manajemen Role",-1)),e("button",{onClick:t[0]||(t[0]=s=>h.value=!0),class:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500"},[...t[6]||(t[6]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),P(" Tambah Role ",-1)])])])]),e("div",be,[e("table",ve,[t[8]||(t[8]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Role"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Deskripsi"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Jumlah User"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Aksi")])],-1)),e("tbody",fe,[(n(!0),i(f,null,y(d.value,s=>(n(),i("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",ye,[e("div",he,[e("div",ke,[e("div",{class:M([j(s.id),"w-8 h-8 rounded-lg flex items-center justify-center"])},[e("span",we,r(s.name.charAt(0)),1)],2)]),e("div",_e,[e("div",Me,r(s.name),1),e("div",Ce,r(s.code),1)])])]),e("td",Ae,r(s.description),1),e("td",Re,r(s.userCount||0)+" user ",1),e("td",Ee,[e("span",{class:M([s.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800","inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},r(s.status?"Aktif":"Nonaktif"),3)]),e("td",ze,[e("button",{onClick:c=>V(s),class:"text-blue-600 hover:text-blue-900 mr-3"}," Edit ",8,je),e("button",{onClick:c=>D(s.id),disabled:s.code==="admin",class:"text-red-600 hover:text-red-900 disabled:opacity-50 disabled:cursor-not-allowed"}," Hapus ",8,He)])]))),128))])])])]),h.value||x.value?(n(),i("div",Ve,[e("div",De,[e("div",Ke,[e("h3",Se,r(x.value?"Edit Role":"Tambah Role"),1),e("form",{onSubmit:T(K,["prevent"]),class:"space-y-4"},[e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nama Role",-1)),g(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.name=s),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Masukkan nama role"},null,512),[[_,o.name]])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Kode Role",-1)),g(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.code=s),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Masukkan kode role"},null,512),[[_,o.code]])]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Deskripsi",-1)),g(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=s=>o.description=s),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Masukkan deskripsi role"},null,512),[[_,o.description]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),g(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>o.status=s),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[...t[12]||(t[12]=[e("option",{value:!0},"Aktif",-1),e("option",{value:!1},"Nonaktif",-1)])],512),[[$,o.status]])]),e("div",Ue,[e("button",{type:"button",onClick:C,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500"}," Batal "),e("button",{type:"submit",disabled:l.value,class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50"},r(l.value?"Menyimpan...":"Simpan"),9,Be)])],32)])])])):N("",!0)]))}},$e=S(Ne,[["__scopeId","data-v-3d4fd279"]]);export{$e as default};
